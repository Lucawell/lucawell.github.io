<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>ã€Pepperæœºå™¨äººç®¡å®¶ï¼ˆäºŒï¼‰ã€‘é¡¹ç›®ç»„æˆ-Webå¼€å‘ç¯‡ï¼šåç«¯ | Luca's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script src="https://www.googletagmanager.com/gtag/js?id=G-N9YN4E82GT" async></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-N9YN4E82GT');
</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement('script');
  hm.src = 'https://hm.baidu.com/hm.js?' + 'c568d4df2cf5d283c6c34b3394e7c0f9';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();</script><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><div class="darkmode-toggle">ğŸŒ“</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">ã€Pepperæœºå™¨äººç®¡å®¶ï¼ˆäºŒï¼‰ã€‘é¡¹ç›®ç»„æˆ-Webå¼€å‘ç¯‡ï¼šåç«¯</h1><a id="logo" href="/.">Luca's Blog</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a><a href="/tags/"><i class="fa fa-tags"> æ ‡ç­¾</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">ã€Pepperæœºå™¨äººç®¡å®¶ï¼ˆäºŒï¼‰ã€‘é¡¹ç›®ç»„æˆ-Webå¼€å‘ç¯‡ï¼šåç«¯</h1><div class="post-meta">2023-12-11<span> | </span><span class="category"><a href="/categories/%E9%A1%B9%E7%9B%AE/">é¡¹ç›®</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> é˜…è¯»</span></span></div><div class="clear"></div><div class="post-content"><h1 id="é¡¹ç›®æ¦‚è¿°"><a href="#é¡¹ç›®æ¦‚è¿°" class="headerlink" title="é¡¹ç›®æ¦‚è¿°"></a>é¡¹ç›®æ¦‚è¿°</h1><p>Webæ¨¡å—çš„å¤§è‡´ç»“æ„æ˜¯åŸºäºMVCæ¶æ„çš„flask+jinja2+mysqlçš„å‰åç«¯ä¸åˆ†ç¦»çš„ç»“æ„ï¼Œå¤§è‡´ç»“æ„å·²ç»åœ¨ä¸Šç¯‡ä¸­ä»‹ç»äº†ï¼Œè¿™é‡Œä¸åšèµ˜è¿°äº†ã€‚ç”±äºé¡¹ç›®éœ€æ±‚æ¯”è¾ƒç®€å•è€Œä¸”éœ€æ±‚ç‰¹æ®Šï¼Œåç«¯é€‰æ‹©è‡ªå·±æ„å»ºå¯¼è‡´æœ‰äº›ç”¨æ³•å¹¶ä¸å®Œå…¨æ»¡è¶³falskçš„å¼€å‘è§„èŒƒã€‚å‰ç«¯æ²¡æœ‰ä½¿ç”¨æ¡†æ¶ï¼Œè€Œæ˜¯ä½¿ç”¨å¼€æºé¡¹ç›®äºŒæ¬¡å¼€å‘ï¼Œä»£ç ä¸­æœ‰è®¸å¤šå†—ä½™ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">â”‚  README.md</span><br><span class="line">â”‚  .env //ç¯å¢ƒå˜é‡</span><br><span class="line">â”‚  app.log //è¿è¡Œæ—¥å¿—</span><br><span class="line">â”‚  runserver.py //é¡¹ç›®å¯åŠ¨æ–‡ä»¶</span><br><span class="line">â”‚  requirements.txt //é¡¹ç›®ä¾èµ–</span><br><span class="line">â”œâ”€app</span><br><span class="line">â”‚  â”‚  config.py //é…ç½®æ–‡ä»¶,æ•°æ®åº“è¿æ¥(éœ€è¦åœ¨ç¯å¢ƒå˜é‡ä¸­åŠ å…¥æ­¤è·¯å¾„)</span><br><span class="line">â”‚  â”‚  forms.py //éªŒè¯è¡¨å•ç¨‹åº</span><br><span class="line">â”‚  â”‚  __init__.py //æ¨¡å—åˆå§‹åŒ–æ–‡ä»¶ï¼ŒFlask ç¨‹åºå¯¹è±¡çš„åˆ›å»ºé¡»åœ¨ __init__.py æ–‡ä»¶é‡Œå®Œæˆ</span><br><span class="line">â”‚  â”‚  wsgi.py //wsgiæœåŠ¡å¯åŠ¨</span><br><span class="line">â”‚  â”‚</span><br><span class="line">â”‚  â”œâ”€controller //MVCä¸­çš„æ§åˆ¶å™¨(C)</span><br><span class="line">â”‚  â”‚     event_controller.py //äº‹ä»¶æ§åˆ¶å™¨</span><br><span class="line">â”‚  â”‚     api_controller.py //apiæ§åˆ¶å™¨</span><br><span class="line">â”‚  â”‚     user_controller.py //ç”¨æˆ·æ§åˆ¶å™¨</span><br><span class="line">â”‚  â”‚     reminder_controller.py //æé†’æ§åˆ¶å™¨</span><br><span class="line">â”‚  â”‚  </span><br><span class="line">â”‚  â”œâ”€model //MVCä¸­çš„æ¨¡å‹,æ•°æ®åº“ä¸­çš„è¡¨(M)</span><br><span class="line">â”‚  â”‚     Event.py //äº‹ä»¶è¡¨</span><br><span class="line">â”‚  â”‚     User.py //ç”¨æˆ·è¡¨</span><br><span class="line">â”‚  â”‚     EmailHistory //é‚®ä»¶å†å²è®°å½•</span><br><span class="line">â”‚  â”‚</span><br><span class="line">â”‚  â”œâ”€views //MVCä¸­çš„è§†å›¾(V)</span><br><span class="line">â”‚  â”‚     admin_view.py //ç®¡ç†å‘˜</span><br><span class="line">â”‚  â”‚     event_view.py //äº‹ä»¶</span><br><span class="line">â”‚  â”‚     index_view.py //ä¸»é¡µ</span><br><span class="line">â”‚  â”‚     user_view.py //ç”¨æˆ·</span><br><span class="line">â”‚  â”‚     album_view.py //ç›¸å†Œ</span><br><span class="line">â”‚  â”‚     reminder_view.py//æé†’</span><br><span class="line">â”‚  â”‚ </span><br><span class="line">â”‚  â”œâ”€static //é™æ€èµ„æºï¼Œcssï¼Œjsç­‰</span><br><span class="line">â”‚  â”œâ”€templates //è§†å›¾æ˜ å°„çš„é¡µé¢</span><br><span class="line">â”‚  â”‚      index.html //ä¸»é¡µ</span><br><span class="line">â”‚  â”‚      create_event.html //åˆ›å»ºäº‹ä»¶</span><br><span class="line">â”‚  â”‚      edit_event.html //ç¼–è¾‘äº‹ä»¶</span><br><span class="line">â”‚  â”‚      event_list.html //æŸ¥çœ‹äº‹ä»¶</span><br><span class="line">â”‚  â”‚      login.html //ç™»å½•</span><br><span class="line">â”‚  â”‚      register.html //æ³¨å†Œ</span><br><span class="line">â”‚  â”‚      calendar.html</span><br><span class="line">â”‚  â”‚      profile.html</span><br><span class="line">â”‚  â”‚      album.html</span><br><span class="line">â”‚  â”‚      email_history.html</span><br><span class="line">â”‚  â”‚      email_template.html</span><br></pre></td></tr></table></figure>

<h2 id="æ¨¡å‹-æ•°æ®åº“çš„æ„å»º"><a href="#æ¨¡å‹-æ•°æ®åº“çš„æ„å»º" class="headerlink" title="æ¨¡å‹-æ•°æ®åº“çš„æ„å»º"></a>æ¨¡å‹-æ•°æ®åº“çš„æ„å»º</h2><p>é¡¹ç›®å¼€å§‹é¡¹ç›®æ„å»ºæ•°æ®åº“,ä¹Ÿæ˜¯MVCä¸­çš„æ¨¡å‹ã€‚æ•°æ®åº“çš„æ­å»ºä½¿ç”¨äº†flask-SQLAlchemyçš„ormæ¡†æ¶ï¼Œä½¿ç”¨flask-migrateè¿›è¡Œæ•°æ®åº“çš„è¿ç§»ã€‚</p>
<p><strong>User.py:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> app <span class="keyword">import</span> db</span><br><span class="line"><span class="keyword">from</span> werkzeug.security <span class="keyword">import</span> generate_password_hash, check_password_hash</span><br><span class="line"><span class="keyword">from</span> flask_login <span class="keyword">import</span> UserMixin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(db.Model, UserMixin):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;users&#x27;</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">255</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    email = db.Column(db.String(<span class="number">255</span>), nullable=<span class="literal">False</span>, unique=<span class="literal">True</span>)</span><br><span class="line">    phone = db.Column(db.String(<span class="number">255</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    password_hash = db.Column(db.String(<span class="number">255</span>), nullable=<span class="literal">False</span>)  <span class="comment"># æ·»åŠ å¯†ç å“ˆå¸Œå­—æ®µ</span></span><br><span class="line">    is_admin = db.Column(db.Boolean, default=<span class="literal">False</span>, nullable=<span class="literal">False</span>)  <span class="comment"># æ–°å¢ is_admin å­—æ®µ</span></span><br><span class="line"></span><br><span class="line">    event = db.relationship(<span class="string">&#x27;Event&#x27;</span>, backref=<span class="string">&#x27;user&#x27;</span>, lazy=<span class="string">&#x27;dynamic&#x27;</span>)</span><br><span class="line">    email_history = db.relationship(<span class="string">&#x27;EmailHistory&#x27;</span>, backref=<span class="string">&#x27;user&#x27;</span>, lazy=<span class="string">&#x27;dynamic&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, email, phone, password, is_admin=<span class="literal">False</span></span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.email = email</span><br><span class="line">        self.phone = phone</span><br><span class="line">        self.set_password(password)  <span class="comment"># åœ¨åˆå§‹åŒ–æ—¶è®¾ç½®å¯†ç å“ˆå¸Œå€¼</span></span><br><span class="line">        self.is_admin = is_admin  <span class="comment"># è®¾ç½®ç”¨æˆ·æ˜¯å¦æ˜¯ç®¡ç†å‘˜</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&lt;User %r&gt;&#x27;</span> % self.name</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ·»åŠ å¯†ç å“ˆå¸Œç›¸å…³çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">set_password</span>(<span class="params">self, password</span>):</span><br><span class="line">        self.password_hash = generate_password_hash(password)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">check_password</span>(<span class="params">self, password</span>):</span><br><span class="line">        <span class="keyword">return</span> check_password_hash(self.password_hash, password)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å®ç° is_active æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">is_active</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span>  <span class="comment"># è¿”å› True è¡¨ç¤ºç”¨æˆ·æ˜¯æ´»åŠ¨çš„ï¼Œå¯ä»¥ç™»å½•</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Event.py:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> app <span class="keyword">import</span> db</span><br><span class="line"><span class="keyword">from</span> app.model.User <span class="keyword">import</span> User</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.ext.hybrid <span class="keyword">import</span> hybrid_property</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Event</span>(db.Model):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;events&#x27;</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    user_id = db.Column(db.Integer, db.ForeignKey(User.<span class="built_in">id</span>, ondelete=<span class="string">&#x27;CASCADE&#x27;</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    title = db.Column(db.String(<span class="number">255</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    start_date = db.Column(db.Date, nullable=<span class="literal">False</span>)</span><br><span class="line">    event_time = db.Column(db.Time)</span><br><span class="line">    end_date = db.Column(db.Date)</span><br><span class="line">    location = db.Column(db.String(<span class="number">255</span>))</span><br><span class="line">    description = db.Column(db.String(<span class="number">255</span>))</span><br><span class="line">    repeat = db.Column(db.String(<span class="number">255</span>), nullable=<span class="literal">False</span>, default=<span class="string">&quot;none&quot;</span>)  <span class="comment"># Text field for custom repeat types</span></span><br><span class="line">    reminder_type = db.Column(db.String(<span class="number">255</span>), nullable=<span class="literal">False</span>, default=<span class="string">&quot;none&quot;</span>)</span><br><span class="line">    reminder_time = db.Column(db.Float, nullable=<span class="literal">True</span>, default=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @hybrid_property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">duration</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.end_date - self.start_date</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, user_id, title, start_date, event_time, end_date, location, description, reminder_time,</span></span><br><span class="line"><span class="params">                 repeat, reminder_type</span>):</span><br><span class="line">        self.user_id = user_id</span><br><span class="line">        self.title = title</span><br><span class="line">        self.start_date = start_date</span><br><span class="line">        self.event_time = event_time</span><br><span class="line">        self.end_date = end_date</span><br><span class="line">        self.location = location</span><br><span class="line">        self.description = description</span><br><span class="line">        self.repeat = repeat</span><br><span class="line">        self.reminder_type = reminder_type</span><br><span class="line">        self.reminder_time = reminder_time</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&lt;Event %r&gt;&#x27;</span> % self.title</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>EmailHistory.py:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># encoding:utf-8  </span></span><br><span class="line"><span class="comment"># encoding:utf-8</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> app <span class="keyword">import</span> db</span><br><span class="line"><span class="keyword">from</span> app.model.User <span class="keyword">import</span> User</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmailHistory</span>(db.Model):</span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    user_id = db.Column(db.Integer, db.ForeignKey(User.<span class="built_in">id</span>, ondelete=<span class="string">&#x27;CASCADE&#x27;</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    title = db.Column(db.String(<span class="number">255</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    content = db.Column(db.Text, nullable=<span class="literal">False</span>)</span><br><span class="line">    recipients = db.Column(db.String(<span class="number">255</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    sent_at = db.Column(db.DateTime, default=datetime.utcnow, nullable=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, user_id, title, content, recipients</span>):</span><br><span class="line">        self.user_id = user_id</span><br><span class="line">        self.title = title</span><br><span class="line">        self.content = content</span><br><span class="line">        self.recipients = recipients</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºå¥½SQLAlchemyåä½¿ç”¨flask-Migrateå‘½ä»¤åˆå§‹åŒ–æ•°æ®åº“ï¼Œä½¿ç”¨æ•°æ®åº“è¿ç§»å¯ä»¥å¾ˆå¥½çš„ç®¡ç†æ•°æ®åº“ç»“æ„çš„æ”¹å˜è€Œä¸”ä¸ä¼šå½±å“æ•°æ®ã€‚</p>
<h3 id="æ•°æ®åº“è¿ç§»"><a href="#æ•°æ®åº“è¿ç§»" class="headerlink" title="æ•°æ®åº“è¿ç§»"></a><strong>æ•°æ®åº“è¿ç§»</strong></h3><p>åˆ›å»ºè¿ç§»å­˜å‚¨åº“ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flask db init</span><br></pre></td></tr></table></figure>

<p>è¿™ä¼šå°†è¿ç§»æ–‡ä»¶å¤¹æ·»åŠ åˆ°åº”ç”¨ç¨‹åºä¸­ã€‚æ­¤æ—¶ï¼Œä½ å¯ä»¥å‘ç°é¡¹ç›®ç›®å½•å¤šäº†ä¸€ä¸ª migrations çš„æ–‡ä»¶å¤¹ï¼Œä¸‹è¾¹çš„ versions ç›®å½•ä¸‹çš„æ–‡ä»¶å°±æ˜¯ç”Ÿæˆçš„æ•°æ®åº“è¿ç§»æ–‡ä»¶ï¼</p>
<p>ç„¶åï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆè¿ç§»</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flask db migrate -m <span class="string">&quot;initial migration&quot;</span></span><br></pre></td></tr></table></figure>

<p>åšå®Œè¿™ä¸¤æ­¥å°±å®Œæˆäº†ç¬¬ä¸€æ¬¡çš„åˆå§‹è¿ç§»æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹æ•°æ®åº“å·²ç»æœ‰äº†æˆ‘ä»¬åˆ›å»ºçš„æ¨¡å‹å­—æ®µï¼ä¹‹åï¼Œæ¯æ¬¡åœ¨æ–°å¢å’Œä¿®æ”¹å®Œæ¨¡å‹æ•°æ®ä¹‹åï¼Œåªéœ€è¦æ‰§è¡Œä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤å³å¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flask db migrate -m <span class="string">&quot;description of changes&quot;</span></span><br><span class="line">flask db upgrade</span><br></pre></td></tr></table></figure>

<p>è¿™äº›æ­¥éª¤å°†å…è®¸ä½ ä½¿ç”¨<code>flask_migrate</code>ç®¡ç†æ•°æ®åº“æ¨¡å‹çš„å˜åŒ–ã€‚è¯·ç¡®ä¿æŒ‰ç…§è¿™äº›æ­¥éª¤åœ¨ä½ çš„Flaskåº”ç”¨ä¸­è®¾ç½®å¹¶ä½¿ç”¨<code>flask_migrate</code>ï¼Œä»¥ä¾¿ç»´æŠ¤æ•°æ®åº“æ¨¡å‹çš„ä¸€è‡´æ€§ã€‚</p>
<p>ä½¿ç”¨NavicateæŸ¥çœ‹æ•°æ®æ¨¡å‹ï¼š</p>
<p><img src="https://img-1313049298.cos.ap-shanghai.myqcloud.com/note-img/202312112210753.png" alt="image.png"></p>
<h2 id="ä»¥ç™»å½•ä¸ºä¾‹åˆ›å»ºWeb-App"><a href="#ä»¥ç™»å½•ä¸ºä¾‹åˆ›å»ºWeb-App" class="headerlink" title="ä»¥ç™»å½•ä¸ºä¾‹åˆ›å»ºWeb App"></a>ä»¥ç™»å½•ä¸ºä¾‹åˆ›å»ºWeb App</h2><h3 id="æ§åˆ¶å™¨"><a href="#æ§åˆ¶å™¨" class="headerlink" title="æ§åˆ¶å™¨"></a><strong>æ§åˆ¶å™¨</strong></h3><p>ç”¨æˆ·ç®¡ç†ä½¿ç”¨äº†flask-loginç®¡ç†ç”¨æˆ·é€»è¾‘<br>æˆ‘ä»¬é¦–å…ˆç¼–å†™æ³¨å†Œå’Œç™»å½•é€»è¾‘ï¼Œåˆ›å»º<code>app/controller/user_controller.py</code> ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># encoding:utf-8</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> flash, redirect, url_for, render_template, make_response</span><br><span class="line"><span class="keyword">from</span> flask_login <span class="keyword">import</span> login_user, login_required, logout_user, current_user</span><br><span class="line"><span class="keyword">from</span> app.forms <span class="keyword">import</span> RegisterForm, LoginForm</span><br><span class="line"><span class="keyword">from</span> app.model.User <span class="keyword">import</span> User</span><br><span class="line"><span class="keyword">from</span> app <span class="keyword">import</span> db, login_manager</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">register</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æ³¨å†Œæ–°ç”¨æˆ·ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    è¯¥å‡½æ•°å¤„ç†æ–°ç”¨æˆ·çš„æ³¨å†Œè¿‡ç¨‹ã€‚å®ƒéªŒè¯ç”¨æˆ·æäº¤çš„è¡¨å•æ•°æ®ï¼Œ</span></span><br><span class="line"><span class="string">    æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²å­˜åœ¨ï¼Œåœ¨æ•°æ®åº“ä¸­åˆ›å»ºæ–°ç”¨æˆ·ï¼Œå¹¶å°†ç”¨æˆ·é‡å®šå‘åˆ°ç™»å½•é¡µé¢</span></span><br><span class="line"><span class="string">    æ³¨å†ŒæˆåŠŸåã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        å¦‚æœè¡¨å•æ•°æ®æœ‰æ•ˆå¹¶ä¸”ç”¨æˆ·æ³¨å†ŒæˆåŠŸï¼Œåˆ™å°†ç”¨æˆ·é‡å®šå‘åˆ°ç™»å½•é¡µé¢ã€‚</span></span><br><span class="line"><span class="string">        å¦åˆ™ï¼Œå®ƒä¼šå‘ˆç°å¸¦æœ‰æ³¨å†Œè¡¨å•çš„ register.html æ¨¡æ¿ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    form = RegisterForm()</span><br><span class="line">    <span class="keyword">if</span> form.validate_on_submit():</span><br><span class="line">        <span class="comment"># è·å–ç”¨æˆ·æäº¤çš„æ•°æ®</span></span><br><span class="line">        name = form.name.data</span><br><span class="line">        email = form.email.data</span><br><span class="line">        phone = form.phone.data</span><br><span class="line">        password = form.password.data</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²å­˜åœ¨</span></span><br><span class="line">        existing_user = User.query.filter_by(email=email).first()</span><br><span class="line">        <span class="keyword">if</span> existing_user:</span><br><span class="line">            flash(<span class="string">&#x27;è¯¥é‚®ç®±åœ°å€å·²è¢«æ³¨å†Œ&#x27;</span>, <span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">            <span class="keyword">return</span> redirect(url_for(<span class="string">&#x27;user.register&#x27;</span>))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆ›å»ºæ–°ç”¨æˆ·</span></span><br><span class="line">        new_user = User(name=name, email=email, phone=phone, password=password)</span><br><span class="line">        db.session.add(new_user)</span><br><span class="line">        db.session.commit()</span><br><span class="line"></span><br><span class="line">        flash(<span class="string">&#x27;æ³¨å†ŒæˆåŠŸï¼Œè¯·ç™»å½•&#x27;</span>, <span class="string">&#x27;success&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> redirect(url_for(<span class="string">&#x27;user.login&#x27;</span>))</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;register.html&#x27;</span>, form=form)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    ç”¨æˆ·ç™»å½•å‡½æ•°</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    å¦‚æœç”¨æˆ·å·²ç™»å½•ï¼Œåˆ™é‡å®šå‘åˆ°å—ä¿æŠ¤çš„é¡µé¢ã€‚</span></span><br><span class="line"><span class="string">    å¦‚æœç”¨æˆ·æäº¤äº†æœ‰æ•ˆçš„ç™»å½•è¡¨å•ï¼Œåˆ™éªŒè¯ç”¨æˆ·å‡­æ®å¹¶å°†ç”¨æˆ·æ ‡è®°ä¸ºå·²ç™»å½•ã€‚</span></span><br><span class="line"><span class="string">    å¦‚æœç”¨æˆ·éªŒè¯å¤±è´¥ï¼Œåˆ™æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    return: æ¸²æŸ“ç™»å½•é¡µé¢æˆ–é‡å®šå‘åˆ°å—ä¿æŠ¤çš„é¡µé¢</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> current_user.is_authenticated:</span><br><span class="line">        <span class="comment"># å¦‚æœç”¨æˆ·å·²ç™»å½•ï¼Œé‡å®šå‘åˆ°å—ä¿æŠ¤çš„é¡µé¢</span></span><br><span class="line">        <span class="keyword">return</span> redirect(url_for(<span class="string">&#x27;event.show_event&#x27;</span>))</span><br><span class="line">    form = LoginForm()</span><br><span class="line">    <span class="keyword">if</span> form.validate_on_submit():</span><br><span class="line">        email = form.email.data  <span class="comment"># ä¿®æ”¹ä¸ºä½¿ç”¨é‚®ç®±ä½œä¸ºç™»å½•å‡­æ®</span></span><br><span class="line">        password = form.password.data</span><br><span class="line">        user = User.query.filter_by(email=email).first()</span><br><span class="line">        <span class="keyword">if</span> user <span class="keyword">and</span> user.check_password(password):</span><br><span class="line">            <span class="comment"># ç”¨æˆ·éªŒè¯æˆåŠŸï¼Œå°†ç”¨æˆ·æ ‡è®°ä¸ºå·²ç™»å½•</span></span><br><span class="line">            <span class="comment"># å¯ä»¥ä½¿ç”¨ Flask-Login æˆ–è‡ªå·±çš„ä¼šè¯ç®¡ç†é€»è¾‘æ¥å¤„ç†ç™»å½•çŠ¶æ€</span></span><br><span class="line">            login_user(user, remember=form.remember)</span><br><span class="line">            <span class="comment"># return redirect(url_for(&#x27;event.show_event&#x27;))  # è·³è½¬åˆ°ç”¨æˆ·ä»ªè¡¨æ¿æˆ–å…¶ä»–å—ä¿æŠ¤çš„é¡µé¢</span></span><br><span class="line">            <span class="comment"># è®¾ç½®cookie</span></span><br><span class="line">            response = make_response(redirect(url_for(<span class="string">&#x27;event.show_event&#x27;</span>)))</span><br><span class="line">            response.set_cookie(<span class="string">&#x27;user_id&#x27;</span>, <span class="built_in">str</span>(user.<span class="built_in">id</span>))  <span class="comment"># å­˜å‚¨ç”¨æˆ·IDåœ¨cookieä¸­</span></span><br><span class="line">            flash(<span class="string">&#x27;ç™»å½•æˆåŠŸ&#x27;</span>, <span class="string">&#x27;success&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> response</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            flash(<span class="string">&#x27;ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥é‚®ç®±æˆ–å¯†ç &#x27;</span>, <span class="string">&#x27;error&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;login.html&#x27;</span>, form=form)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@login_required</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">profile</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    ç”¨æˆ·ä¸ªäººä¿¡æ¯é¡µé¢</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    name = current_user.name</span><br><span class="line">    email = current_user.email</span><br><span class="line">    phone = current_user.phone</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;profile.html&#x27;</span>, name=name, email=email, phone=phone)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@login_required</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">logout</span>():</span><br><span class="line">    logout_user()  <span class="comment"># ä½¿ç”¨ Flask-Login æ³¨é”€ç”¨æˆ·</span></span><br><span class="line">    flash(<span class="string">&#x27;æˆåŠŸæ³¨é”€&#x27;</span>, <span class="string">&#x27;success&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> redirect(url_for(<span class="string">&#x27;user.login&#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@login_manager.user_loader</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_user</span>(<span class="params">user_id</span>):</span><br><span class="line">    <span class="comment"># ä½¿ç”¨ç”¨æˆ· ID æŸ¥è¯¢ç”¨æˆ·å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">return</span> User.query.get(<span class="built_in">int</span>(user_id))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>åˆ›å»ºè¡¨å•éªŒè¯:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># forms.py  </span></span><br><span class="line"><span class="keyword">from</span> flask_wtf <span class="keyword">import</span> FlaskForm  </span><br><span class="line"><span class="keyword">from</span> wtforms <span class="keyword">import</span> StringField, PasswordField, validators, SubmitField, ValidationError, DateField, TimeField  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RegisterForm</span>(<span class="title class_ inherited__">FlaskForm</span>):  </span><br><span class="line">	name = StringField(<span class="string">&#x27;ç”¨æˆ·å&#x27;</span>, [validators.DataRequired(<span class="string">&quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;</span>)])  </span><br><span class="line">	email = StringField(<span class="string">&#x27;é‚®ç®±&#x27;</span>, [validators.DataRequired(<span class="string">&quot;é‚®ç®±ä¸èƒ½ä¸ºç©º&quot;</span>), validators.Email(<span class="string">&quot;æ— æ•ˆçš„é‚®ç®±åœ°å€&quot;</span>)])  </span><br><span class="line">	phone = StringField(<span class="string">&#x27;ç”µè¯&#x27;</span>)  </span><br><span class="line">	password = PasswordField(<span class="string">&#x27;å¯†ç &#x27;</span>, [  </span><br><span class="line">	validators.DataRequired(<span class="string">&quot;å¯†ç ä¸èƒ½ä¸ºç©º&quot;</span>),  </span><br><span class="line">	validators.Length(<span class="built_in">min</span>=<span class="number">8</span>, message=<span class="string">&quot;å¯†ç é•¿åº¦è‡³å°‘ 8 ä¸ªå­—ç¬¦&quot;</span>)  </span><br><span class="line">	])  </span><br><span class="line">	confirm_password = PasswordField(<span class="string">&#x27;ç¡®è®¤å¯†ç &#x27;</span>, [  </span><br><span class="line">	validators.DataRequired(<span class="string">&quot;è¯·å†æ¬¡è¾“å…¥å¯†ç &quot;</span>),  </span><br><span class="line">	validators.EqualTo(<span class="string">&#x27;password&#x27;</span>, message=<span class="string">&#x27;ä¸¤æ¬¡å¯†ç ä¸åŒ¹é…&#x27;</span>)  </span><br><span class="line">	])  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LoginForm</span>(<span class="title class_ inherited__">FlaskForm</span>):  </span><br><span class="line">	email = StringField(<span class="string">&#x27;é‚®ç®±&#x27;</span>, [validators.DataRequired(<span class="string">&quot;é‚®ç®±ä¸èƒ½ä¸ºç©º&quot;</span>), validators.Email(<span class="string">&quot;æ— æ•ˆçš„é‚®ç®±åœ°å€&quot;</span>)])  </span><br><span class="line">	password = PasswordField(<span class="string">&#x27;å¯†ç &#x27;</span>, [validators.DataRequired(<span class="string">&quot;å¯†ç ä¸èƒ½ä¸ºç©º&quot;</span>)])  </span><br><span class="line">	remember = StringField(<span class="string">&#x27;è®°ä½æˆ‘&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a><strong>è§†å›¾</strong></h3><p>é¡¹ç›®ä½¿ç”¨flask Blueprint(è“å›¾)æ¥ç®¡ç†è·¯ç”±,åˆ›å»º<code>app/views/user_view.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># user_view.py  </span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint  </span><br><span class="line"><span class="keyword">from</span> app.controller <span class="keyword">import</span> user_controller  </span><br><span class="line">  </span><br><span class="line">user_blueprint = Blueprint(<span class="string">&#x27;user&#x27;</span>, __name__)  </span><br><span class="line">  </span><br><span class="line">user_blueprint.route(<span class="string">&#x27;/register&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>])(user_controller.register)  </span><br><span class="line">user_blueprint.route(<span class="string">&#x27;/login&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>])(user_controller.login)  </span><br><span class="line">user_blueprint.route(<span class="string">&#x27;/logout&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>])(user_controller.logout)  </span><br><span class="line">user_blueprint.route(<span class="string">&#x27;/profile&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>])(user_controller.profile)</span><br></pre></td></tr></table></figure>

<h3 id="å°†å‚æ•°é€šè¿‡jinja2ä¼ é€’åˆ°å‰ç«¯"><a href="#å°†å‚æ•°é€šè¿‡jinja2ä¼ é€’åˆ°å‰ç«¯" class="headerlink" title="å°†å‚æ•°é€šè¿‡jinja2ä¼ é€’åˆ°å‰ç«¯"></a>å°†å‚æ•°é€šè¿‡jinja2ä¼ é€’åˆ°å‰ç«¯</h3><p><strong>æ³¨å†Œé¡µé¢:</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>æ³¨å†Œ<span class="tag">&lt;/<span class="name">title</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../static/css/register-login.css&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../static/images/robot.png&quot;</span> <span class="attr">type</span>=<span class="string">&quot;image/x-icon&quot;</span>/&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cent-box register-box&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cent-box-header&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;main-title hide&quot;</span>&gt;</span>Pepperæœºå™¨äºº<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;sub-title&quot;</span>&gt;</span>æ—¥ç¨‹ç®¡ç†ç³»ç»Ÿ<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cont-main clearfix&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index-tab&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index-slide-nav&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; url_for(&#x27;user.login&#x27;) &#125;&#125;&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; url_for(&#x27;user.register&#x27;) &#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span>æ³¨å†Œ<span class="tag">&lt;/<span class="name">a</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;slide-bar slide-bar1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span>  </span><br><span class="line">&#123;&#123; form.hidden_tag() &#125;&#125;  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login form&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;group&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;group-ipt name&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span>  </span><br><span class="line">&#123;% if form.name.data is not none %&#125;  </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ipt&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; form.name.data &#125;&#125;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥æ‚¨çš„ç”¨æˆ·å&quot;</span> <span class="attr">required</span>&gt;</span>  </span><br><span class="line">&#123;% else %&#125;  </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ipt&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥æ‚¨çš„ç”¨æˆ·å&quot;</span> <span class="attr">required</span>&gt;</span>  </span><br><span class="line">&#123;% endif %&#125;  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;group-ipt email&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span>  </span><br><span class="line">&#123;% if form.email.data is not none %&#125;  </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">id</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ipt&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; form.email.data &#125;&#125;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥æ‚¨çš„é‚®ç®±&quot;</span> <span class="attr">required</span>&gt;</span>  </span><br><span class="line">&#123;% else %&#125;  </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">id</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ipt&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥æ‚¨çš„é‚®ç®±&quot;</span> <span class="attr">required</span>&gt;</span>  </span><br><span class="line">&#123;% endif %&#125;  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;group-ipt phone&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;phone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span>  </span><br><span class="line">&#123;% if form.phone.data is not none %&#125;  </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">id</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ipt&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; form.phone.data &#125;&#125;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥æ‚¨çš„ç”µè¯&quot;</span> <span class="attr">required</span>&gt;</span>  </span><br><span class="line">&#123;% else %&#125;  </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">id</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ipt&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥æ‚¨çš„ç”µè¯&quot;</span> <span class="attr">required</span>&gt;</span>  </span><br><span class="line">&#123;% endif %&#125;  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;group-ipt password&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ipt&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥å¯†ç &quot;</span> <span class="attr">required</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;group-ipt confirm_password&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;confirm_password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;confirm_password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;confirm_password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ipt&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;ç¡®è®¤å¯†ç &quot;</span> <span class="attr">required</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;button&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;register-btn&quot;</span> <span class="attr">id</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ³¨å†Œ&quot;</span>&gt;</span>æ³¨å†Œ<span class="tag">&lt;/<span class="name">button</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#x27;../static/js/particles.js&#x27;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#x27;../static/js/background.js&#x27;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#x27;../static/js/jquery.min.js&#x27;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#x27;../static/js/layer/layer.js&#x27;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#x27;../static/js/index.js&#x27;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå›¾:<br><img src="https://img-1313049298.cos.ap-shanghai.myqcloud.com/note-img/202312112239677.png" alt="image.png"></p>
<p><strong>ç™»å½•é¡µé¢:</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">title</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; url_for(&#x27;static&#x27;, filename=&#x27;css/register-login.css&#x27;) &#125;&#125;&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; url_for(&#x27;static&#x27;, filename=&#x27;images/robot.png&#x27;) &#125;&#125;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;image/x-icon&quot;</span>/&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cent-box&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cent-box-header&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;main-title hide&quot;</span>&gt;</span>Pepperæœºå™¨äºº<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;sub-title&quot;</span>&gt;</span>æ—¥ç¨‹ç®¡ç†ç³»ç»Ÿ<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cont-main clearfix&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index-tab&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index-slide-nav&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; url_for(&#x27;user.login&#x27;) &#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; url_for(&#x27;user.register&#x27;) &#125;&#125;&quot;</span>&gt;</span>æ³¨å†Œ<span class="tag">&lt;/<span class="name">a</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;slide-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span>  </span><br><span class="line">&#123;&#123; form.hidden_tag() &#125;&#125;  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login form&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;group&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;group-ipt email&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span>  </span><br><span class="line">&#123;% if form.email.data is not none %&#125;  </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">id</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ipt&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; form.email.data &#125;&#125;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥æ‚¨çš„é‚®ç®±&quot;</span> <span class="attr">required</span>&gt;</span>  </span><br><span class="line">&#123;% else %&#125;  </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">id</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ipt&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥æ‚¨çš„é‚®ç®±&quot;</span> <span class="attr">required</span>&gt;</span>  </span><br><span class="line">&#123;% endif %&#125;  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;group-ipt password&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ipt&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥æ‚¨çš„ç™»å½•å¯†ç &quot;</span> <span class="attr">required</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;button&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;login-btn register-btn&quot;</span> <span class="attr">id</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç™»å½•&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">button</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;remember clearfix&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;remember-me&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;remember&quot;</span>&gt;</span> è®°ä½æˆ‘<span class="tag">&lt;/<span class="name">label</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#x27;../static/js/particles.js&#x27;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#x27;../static/js/background.js&#x27;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#x27;../static/js/jquery.min.js&#x27;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#x27;../static/js/layer/layer.js&#x27;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#x27;../static/js/index.js&#x27;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå›¾:</p>
<p><img src="https://img-1313049298.cos.ap-shanghai.myqcloud.com/note-img/202312112239068.png" alt="image.png"></p>
<h3 id="é…ç½®config-py"><a href="#é…ç½®config-py" class="headerlink" title="é…ç½®config.py"></a>é…ç½®config.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è°ƒè¯•æ¨¡å¼æ˜¯å¦å¼€å¯  </span></span><br><span class="line">DEBUG = <span class="literal">True</span>  </span><br><span class="line"><span class="comment"># æ˜¯å¦è¿½è¸ªå¯¹è±¡çš„ä¿®æ”¹ã€‚  </span></span><br><span class="line">SQLALCHEMY_TRACK_MODIFICATIONS = <span class="literal">True</span>  </span><br><span class="line"><span class="comment"># æŸ¥è¯¢æ—¶æ˜¾ç¤ºåŸå§‹SQLè¯­å¥  </span></span><br><span class="line">SQLALCHEMY_ECHO = <span class="literal">False</span>  </span><br><span class="line"><span class="comment"># sessionå¿…é¡»è¦è®¾ç½®key  </span></span><br><span class="line">SECRET_KEY = <span class="string">&#x27;c798ee1f5fd894f6e0ba9fc0d16b8b22&#x27;</span>  </span><br><span class="line"><span class="comment"># mysqlæ•°æ®åº“è¿æ¥ä¿¡æ¯  </span></span><br><span class="line">DATABASE = <span class="string">&#x27;schedule&#x27;</span>  </span><br><span class="line">SQLALCHEMY_DATABASE_URI = <span class="string">&quot;mysql+pymysql://[user]:[password]@localhost/&quot;</span> + DATABASE</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨å·¥å‚å‡½æ•°åˆå§‹åŒ–"><a href="#ä½¿ç”¨å·¥å‚å‡½æ•°åˆå§‹åŒ–" class="headerlink" title="ä½¿ç”¨å·¥å‚å‡½æ•°åˆå§‹åŒ–"></a>ä½¿ç”¨å·¥å‚å‡½æ•°åˆå§‹åŒ–</h3><p><code>app/_init_.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask  </span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy  </span><br><span class="line"><span class="keyword">from</span> flask_login <span class="keyword">import</span> LoginManager  </span><br><span class="line"><span class="keyword">from</span> flask_migrate <span class="keyword">import</span> Migrate  </span><br><span class="line"><span class="keyword">from</span> flask_restful <span class="keyword">import</span> Api  </span><br><span class="line"><span class="keyword">from</span> flask_admin <span class="keyword">import</span> Admin  </span><br><span class="line"><span class="keyword">from</span> flask_mail <span class="keyword">import</span> Mail  </span><br><span class="line"><span class="keyword">from</span> flask_uploads <span class="keyword">import</span> configure_uploads  </span><br><span class="line"><span class="keyword">import</span> logging  </span><br><span class="line"><span class="keyword">from</span> logging.handlers <span class="keyword">import</span> RotatingFileHandler  </span><br><span class="line"><span class="keyword">from</span> flask_apscheduler <span class="keyword">import</span> APScheduler  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># åˆ›å»ºFlaskåº”ç”¨å®ä¾‹  </span></span><br><span class="line">db = SQLAlchemy() <span class="comment"># æ•°æ®åº“å®ä¾‹  </span></span><br><span class="line">login_manager = LoginManager() <span class="comment"># ç™»å½•ç®¡ç†å®ä¾‹  </span></span><br><span class="line">migrate = Migrate() <span class="comment"># æ•°æ®åº“è¿ç§»å®ä¾‹   </span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_app</span>() -&gt; Flask:  </span><br><span class="line"><span class="string">&quot;&quot;&quot;åˆ›å»ºFlaskåº”ç”¨å®ä¾‹å¹¶è¿›è¡Œåˆå§‹åŒ–è®¾ç½®ã€‚  </span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">Returns:  </span></span><br><span class="line"><span class="string">Flask: åˆå§‹åŒ–è®¾ç½®åçš„Flaskåº”ç”¨å®ä¾‹ã€‚  </span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>  </span><br><span class="line">	app = Flask(__name__)  </span><br><span class="line">	app.config.from_object(<span class="string">&#x27;app.config&#x27;</span>)  </span><br><span class="line">	app.config.from_envvar(<span class="string">&#x27;FLASKR_CONFIGS&#x27;</span>)  </span><br><span class="line">	  </span><br><span class="line">	configure_logging(app) <span class="comment"># æ·»åŠ æ—¥å¿—é…ç½®  </span></span><br><span class="line">	initialize_extensions(app) <span class="comment"># åˆå§‹åŒ–  </span></span><br><span class="line">	register_blueprints(app) <span class="comment"># æ³¨å†Œè“å›¾  </span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> app  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize_extensions</span>(<span class="params">app: Flask</span>) -&gt; <span class="literal">None</span>:  </span><br><span class="line"><span class="string">&quot;&quot;&quot;åˆå§‹åŒ–æ‰©å±•ï¼ŒåŒ…æ‹¬æ•°æ®åº“ã€ç™»å½•ç®¡ç†ã€æ•°æ®åº“è¿ç§»ã€é‚®ä»¶å’Œæ–‡ä»¶ä¸Šä¼ ã€‚  </span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">Args:  </span></span><br><span class="line"><span class="string">app (Flask): Flaskåº”ç”¨å®ä¾‹ã€‚  </span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>  </span><br><span class="line">	db.init_app(app)  </span><br><span class="line">	migrate.init_app(app, db)  </span><br><span class="line">	login_manager.init_app(app)  </span><br><span class="line">	login_manager.login_view = <span class="string">&#x27;user.login&#x27;</span>  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">register_blueprints</span>(<span class="params">app: Flask</span>) -&gt; <span class="literal">None</span>:  </span><br><span class="line"><span class="string">&quot;&quot;&quot;æ³¨å†Œè“å›¾ï¼ŒåŒ…æ‹¬ä¸»é¡µã€ç”¨æˆ·ã€äº‹ä»¶å’Œæé†’è“å›¾ã€‚  </span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">Args:  </span></span><br><span class="line"><span class="string">app (Flask): Flaskåº”ç”¨å®ä¾‹ã€‚  </span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>   </span><br><span class="line">	<span class="keyword">from</span> app.views.user_view <span class="keyword">import</span> user_blueprint  </span><br><span class="line">	</span><br><span class="line">	app.register_blueprint(user_blueprint, url_prefix=<span class="string">&#x27;/user&#x27;</span>)  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">configure_logging</span>(<span class="params">app: Flask</span>) -&gt; <span class="literal">None</span>:  </span><br><span class="line"><span class="string">&quot;&quot;&quot;é…ç½®åº”ç”¨ç¨‹åºæ—¥å¿—ã€‚  </span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">Args:  </span></span><br><span class="line"><span class="string">app (Flask): Flaskåº”ç”¨å®ä¾‹ã€‚  </span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>  </span><br><span class="line">	log_file_path = <span class="string">&#x27;app.log&#x27;</span>  </span><br><span class="line">	log_handler = RotatingFileHandler(log_file_path, maxBytes=<span class="number">10240</span>, backupCount=<span class="number">10</span>)  </span><br><span class="line">	log_handler.setFormatter(logging.Formatter(  </span><br><span class="line">	<span class="string">&#x27;%(asctime)s %(levelname)s: %(message)s &#x27;</span>  </span><br><span class="line">	<span class="string">&#x27;[in %(pathname)s:%(lineno)d]&#x27;</span>  </span><br><span class="line">	))  </span><br><span class="line">	log_handler.setLevel(logging.INFO)  </span><br><span class="line">	app.logger.addHandler(log_handler)  </span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<h3 id="è¿è¡Œé¡¹ç›®"><a href="#è¿è¡Œé¡¹ç›®" class="headerlink" title="è¿è¡Œé¡¹ç›®"></a>è¿è¡Œé¡¹ç›®</h3><p><code>app/runserver.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> app <span class="keyword">import</span> create_app  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:  </span><br><span class="line">	app = create_app()  </span><br><span class="line">	app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>, port=<span class="number">5000</span>, debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
</div><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/choregraphe/" rel="tag">choregraphe</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pepper/" rel="tag">pepper</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web/" rel="tag">web</a></li></ul></div><div class="post-nav"><a class="pre" href="/2023/12/12/%E3%80%90Pepper%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%AE%A1%E5%AE%B6%EF%BC%88%E4%B8%89%EF%BC%89%E3%80%91%E9%A1%B9%E7%9B%AE%E7%BB%84%E6%88%90-Web%E5%BC%80%E5%8F%91%E7%AF%87-%E6%97%A5%E7%A8%8B%E9%80%BB%E8%BE%91%E7%9A%84%E5%88%9B%E5%BB%BA/">ã€Pepperæœºå™¨äººç®¡å®¶ï¼ˆä¸‰ï¼‰ã€‘é¡¹ç›®ç»„æˆ-Webå¼€å‘ç¯‡-æ—¥ç¨‹é€»è¾‘çš„åˆ›å»º</a><a class="next" href="/2023/12/11/%E3%80%90Pepper%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%AE%A1%E5%AE%B6%EF%BC%88%E4%B8%80%EF%BC%89%E3%80%91%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA/">ã€Pepperæœºå™¨äººç®¡å®¶ï¼ˆä¸€ï¼‰ã€‘é¡¹ç›®æ„å»º</a></div><div id="container"></div><link rel="stylesheet" type="text/css" href="//unpkg.com/gitalk/dist/gitalk.css"><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"></script><script type="text/javascript" src="//unpkg.com/gitalk/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
  clientID: '7712838cc608b3327b6c',
  clientSecret: '63b48a188b96620338ea457323f367b57218c0c0',
  repo: 'blog_comments',
  owner: 'Lucawell',
  admin: ['Lucawell'],
  id: md5(location.pathname),
  distractionFreeMode: false
})
gitalk.render('container')
</script></div></div></div><script type="text/javascript" src="/js/toc.js?v=1.0.0" async></script><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar-toc"><div class="stoc-article" id="sidebar-stoc"><strong class="stoc-title"><i class="fa fa-blind"> Contents </i></strong><div class="toc-nav" id="stoc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">é¡¹ç›®æ¦‚è¿°</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9E%8B-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%9E%84%E5%BB%BA"><span class="toc-number">1.1.</span> <span class="toc-text">æ¨¡å‹-æ•°æ®åº“çš„æ„å»º</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%81%E7%A7%BB"><span class="toc-number">1.1.1.</span> <span class="toc-text">æ•°æ®åº“è¿ç§»</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A5%E7%99%BB%E5%BD%95%E4%B8%BA%E4%BE%8B%E5%88%9B%E5%BB%BAWeb-App"><span class="toc-number">1.2.</span> <span class="toc-text">ä»¥ç™»å½•ä¸ºä¾‹åˆ›å»ºWeb App</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-number">1.2.1.</span> <span class="toc-text">æ§åˆ¶å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE"><span class="toc-number">1.2.2.</span> <span class="toc-text">è§†å›¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E5%8F%82%E6%95%B0%E9%80%9A%E8%BF%87jinja2%E4%BC%A0%E9%80%92%E5%88%B0%E5%89%8D%E7%AB%AF"><span class="toc-number">1.2.3.</span> <span class="toc-text">å°†å‚æ•°é€šè¿‡jinja2ä¼ é€’åˆ°å‰ç«¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEconfig-py"><span class="toc-number">1.2.4.</span> <span class="toc-text">é…ç½®config.py</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%8E%82%E5%87%BD%E6%95%B0%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">1.2.5.</span> <span class="toc-text">ä½¿ç”¨å·¥å‚å‡½æ•°åˆå§‹åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.2.6.</span> <span class="toc-text">è¿è¡Œé¡¹ç›®</span></a></li></ol></li></ol></li></ol></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2023 <a href="/." rel="nofollow">Luca's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/css/search.css?v=1.0.0"><script type="text/javascript" src="/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
  search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸï¼"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>